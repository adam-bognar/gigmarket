<nav class="sticky top-0 z-50 bg-white shadow-sm w-full" aria-label="Main navigation">
    <!-- Main row -->
    <div class="flex items-center gap-4 px-6 py-3">

        <!-- Logo -->
        <a routerLink="/" class="flex items-center gap-2 no-underline shrink-0" aria-label="GigMarket home">
            <svg class="w-7 h-7" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <rect width="12" height="12" rx="2" fill="#1DBF73" />
                <rect x="16" width="12" height="12" rx="2" fill="#FBBF24" />
                <rect y="16" width="12" height="12" rx="2" fill="#8B5CF6" />
                <rect x="16" y="16" width="12" height="12" rx="2" fill="#3B82F6" />
            </svg>
            <span class="text-xl font-bold text-slate-800 tracking-tight">GigMarket</span>
        </a>

        <!-- Search bar: hidden on mobile, visible md+ -->
        <form class="hidden md:flex flex-1 items-center" role="search" (ngSubmit)="onSearch()">
            <div class="flex items-center w-1/2 border border-divider bg-gray-900/10 rounded-md overflow-hidden focus-within:border-primary transition-colors">
                <input type="search"
                    class="flex-1 px-4 py-2 text-sm text-heading placeholder-muted bg-transparent outline-none"
                    placeholder="What service are you looking for today?" aria-label="Search services"
                    [(ngModel)]="searchQuery" name="search" />
                <button type="submit"
                    class="flex items-center justify-center w-10 h-10 bg-primary hover:bg-primary-dark text-on-primary transition-colors cursor-pointer"
                    aria-label="Search">
                    <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                        <circle cx="11" cy="11" r="8" />
                        <line x1="21" y1="21" x2="16.65" y2="16.65" />
                    </svg>
                </button>
            </div>
        </form>

        <!-- Auth buttons: hidden on mobile, visible md+ -->
        <div class="hidden md:flex items-center gap-3 ml-auto shrink-0">
            <button class="px-4 py-2 text-sm font-medium text-heading hover:text-primary transition-colors cursor-pointer">
                Sign In
            </button>
            <button class="px-4 py-2 text-sm font-semibold text-on-primary bg-primary hover:bg-primary-dark rounded-md transition-colors cursor-pointer">
                Join
            </button>
        </div>

        <!-- Hamburger button: visible only on mobile -->
        <button class="md:hidden ml-auto p-2 rounded-md text-heading hover:text-primary transition-colors cursor-pointer"
            (click)="toggleMobileMenu()"
            [attr.aria-expanded]="mobileMenuOpen()"
            aria-label="Toggle navigation menu">
            @if (mobileMenuOpen()) {
                <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <line x1="18" y1="6" x2="6" y2="18" />
                    <line x1="6" y1="6" x2="18" y2="18" />
                </svg>
            } @else {
                <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <line x1="3" y1="6" x2="21" y2="6" />
                    <line x1="3" y1="12" x2="21" y2="12" />
                    <line x1="3" y1="18" x2="21" y2="18" />
                </svg>
            }
        </button>
    </div>

    <!-- Mobile drawer: search + auth buttons -->
    @if (mobileMenuOpen()) {
        <div class="md:hidden border-t border-divider px-6 py-4 flex flex-col gap-4">
            <form role="search" (ngSubmit)="onSearch()">
                <div class="flex items-center border border-divider bg-gray-500/10 rounded-md overflow-hidden focus-within:border-primary transition-colors">
                    <input type="search"
                        class="flex-1 px-4 py-2 text-sm text-heading placeholder-muted bg-transparent outline-none"
                        placeholder="What service are you looking for today?" aria-label="Search services"
                        [(ngModel)]="searchQuery" name="searchMobile" />
                    <button type="submit"
                        class="flex items-center justify-center w-10 h-10 bg-primary hover:bg-primary-dark text-on-primary transition-colors cursor-pointer"
                        aria-label="Search">
                        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <circle cx="11" cy="11" r="8" />
                            <line x1="21" y1="21" x2="16.65" y2="16.65" />
                        </svg>
                    </button>
                </div>
            </form>
            <div class="flex flex-col gap-2">
                <button class="w-full py-2 text-sm font-medium text-heading hover:text-primary border border-divider rounded-md transition-colors cursor-pointer">
                    Sign In
                </button>
                <button class="w-full py-2 text-sm font-semibold text-on-primary bg-primary hover:bg-primary-dark rounded-md transition-colors cursor-pointer">
                    Join
                </button>
            </div>
        </div>
    }
</nav>
